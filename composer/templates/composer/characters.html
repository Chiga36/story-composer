{% extends 'composer/base.html' %}

{% block content %}
<style>
.character-card {
    margin-bottom: 2rem;
}

.character-image {
    width: 100%;
    max-width: 250px;
    height: 350px;
    object-fit: cover;
    object-position: center top;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    display: block;
    margin: 0 auto 15px auto;
}

.background-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.card {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.card-body {
    flex: 1;
    display: flex;
    flex-direction: column;
}
</style>

<h2>My AI-Generated Characters</h2>

<div class="row">
    <div class="col-md-9">
        <div class="row">
            {% for character in characters %}
                <div class="col-md-4 character-card">
                    <div class="card h-100">
                        {% if character.image_url %}
                            <img src="{{ character.image_url }}" class="character-image" alt="{{ character.name }}">
                        {% else %}
                            <div class="character-image bg-light d-flex align-items-center justify-content-center">
                                <div class="text-center text-muted">
                                    <i class="fas fa-user fa-3x mb-2"></i>
                                    <p>Generating...</p>
                                </div>
                            </div>
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ character.name }}</h5>
                            <p class="card-text flex-grow-1">{{ character.description|truncatewords:15 }}</p>
                            {% if character.generated_image_url %}
                                <small class="text-success">‚úÖ AI Generated Full Body</small>
                            {% else %}
                                <small class="text-warning">‚è≥ Processing...</small>
                            {% endif %}
                            <div class="mt-2">
                                <a href="{% url 'delete_character' character.id %}" class="btn btn-danger btn-sm" 
                                   onclick="return confirm('Are you sure?')">Delete</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="col-12">
                    <div class="alert alert-info">
                        <h5>üõ°Ô∏è Welcome to AI Character Generator!</h5>
                        <p>No characters created yet. Create your first AI-generated full body character!</p>
                        <p><strong>How it works:</strong></p>
                        <ul>
                            <li>Describe your character (warrior, wizard, archer, etc.)</li>
                            <li>AI generates a full body portrait in vertical orientation</li>
                            <li>Perfect for character sheets and RPG games</li>
                        </ul>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    
    <div class="col-md-3">
        <div class="card">
            <div class="card-header">
                <h5>üõ°Ô∏è Generate Full Body Character</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-info small">
                    <strong>üí° Tips for full body characters:</strong><br>
                    ‚Ä¢ Mention profession (knight, wizard, archer)<br>
                    ‚Ä¢ Include clothing/armor details<br>
                    ‚Ä¢ Specify weapons or accessories<br>
                    ‚Ä¢ Describe pose (standing, ready for battle)
                </div>
                <form method="post">
                    {% csrf_token %}
                    {{ form.as_p }}
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-magic"></i> Generate Full Body Character
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
